<!doctype html>
<html lang="es" data-theme="dark" data-ui="neo-atlas">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#0b0f14" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="robots" content="noindex,nofollow" />

  <title>Random Live Cams ‚Äî Control</title>

  <link rel="stylesheet" href="./styles.css" />
  <script>window.APP_VERSION = "2.2.1";</script>
</head>

<body class="mode-control">
  <main class="controlWrap" role="application" aria-label="Random Live Cams ‚Äî Control Room">
    <header class="controlHeader">
      <div class="controlTitle">
        <div class="kicker">CONTROL ROOM</div>
        <div class="name">Random Live Cams</div>
      </div>
      <div class="pill mono" id="ctlStatus" aria-live="polite">Conectando‚Ä¶</div>
    </header>

    <section class="controlGrid" aria-label="Panel de control">
      <!-- NOW -->
      <div class="card">
        <div class="cardTitle">Ahora</div>
        <div class="nowTitle" id="ctlNowTitle">‚Äî</div>
        <div class="nowMeta">
          <span id="ctlNowPlace">‚Äî</span>
          <span class="dot">‚Ä¢</span>
          <span class="mono" id="ctlNowTimer">--:--</span>
        </div>
        <div class="row2">
          <a id="ctlOrigin" class="btn ghost" href="#" target="_blank" rel="noopener">Abrir origen</a>
          <button id="ctlCopyStreamUrl" class="btn" type="button">Copiar URL stream</button>
        </div>
      </div>

      <!-- TRANSPORTE -->
      <div class="card">
        <div class="cardTitle">Transporte</div>
        <div class="controls3">
          <button class="btn" id="ctlPrev" type="button" aria-label="Anterior">‚óÄ</button>
          <button class="btn" id="ctlPlay" type="button" aria-label="Pausa/Reanudar">‚è∏</button>
          <button class="btn" id="ctlNext" type="button" aria-label="Siguiente">‚ñ∂</button>
        </div>
        <button class="btn ghost full" id="ctlShuffle" type="button">üé≤ Mezclar</button>
      </div>

      <!-- AJUSTES -->
      <div class="card">
        <div class="cardTitle">Ajustes</div>

        <label class="row" for="ctlMins">
          <span>Duraci√≥n (min)</span>
          <input id="ctlMins" class="input" type="number" min="1" max="120" step="1" value="5" inputmode="numeric" />
        </label>
        <button id="ctlApplyMins" class="btn full" type="button">Aplicar duraci√≥n</button>

        <label class="row" for="ctlFit">
          <span>Fit</span>
          <select id="ctlFit" class="select">
            <option value="cover">Cover</option>
            <option value="contain">Contain</option>
          </select>
        </label>

        <label class="row" for="ctlHud">
          <span>HUD</span>
          <select id="ctlHud" class="select">
            <option value="on">Mostrar</option>
            <option value="off">Ocultar</option>
          </select>
        </label>

        <label class="row" for="ctlHudDetails">
          <span>Detalles HUD</span>
          <select id="ctlHudDetails" class="select">
            <option value="collapsed">Colapsado</option>
            <option value="expanded">Expandido</option>
          </select>
        </label>

        <label class="row" for="ctlAutoskip">
          <span>Autoskip (errores)</span>
          <select id="ctlAutoskip" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <label class="row" for="ctlAdfree">
          <span>Adfree</span>
          <select id="ctlAdfree" class="select">
            <option value="off">OFF</option>
            <option value="on">ON (sin YouTube)</option>
          </select>
        </label>

        <button id="ctlReset" class="btn ghost full" type="button">Reset estado</button>
      </div>

      <!-- ‚úÖ CATALOG MODE (4 cams) -->
      <div class="card">
        <div class="cardTitle">Modo cat√°logo (CCTV)</div>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlCatalogOn">
            <span>Cat√°logo</span>
            <select id="ctlCatalogOn" class="select">
              <option value="off">OFF</option>
              <option value="on">ON</option>
            </select>
          </label>
          <div class="pill mono" id="ctlCatalogStatus" aria-live="polite">Cat√°logo: ‚Äî</div>
        </div>

        <label class="row" for="ctlCatalogLayout">
          <span>Layout</span>
          <select id="ctlCatalogLayout" class="select">
            <option value="quad">2√ó2 (4 cams)</option>
          </select>
        </label>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlCatalogGap">
            <span>Separaci√≥n (px)</span>
            <input id="ctlCatalogGap" class="input" type="number" min="0" max="24" step="1" value="8" inputmode="numeric" />
          </label>
          <label class="row" style="margin:0" for="ctlCatalogLabels">
            <span>Labels</span>
            <select id="ctlCatalogLabels" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
        </div>

        <label class="row" for="ctlCatalogMuted">
          <span>Mutear v√≠deos</span>
          <select id="ctlCatalogMuted" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <div class="row2">
          <button id="ctlCatalogApply" class="btn full" type="button">Aplicar cat√°logo</button>
          <button id="ctlCatalogReset" class="btn ghost full" type="button">Reset cat√°logo</button>
        </div>

        <div class="hint">
          ‚úÖ Muestra 4 cams (la actual + 3 siguientes). Ideal estilo CCTV.
        </div>
      </div>

      <!-- ‚úÖ NEWS TICKER (CONFIG) -->
      <div class="card card--ticker">
        <div class="cardTitle">Noticias (ticker)</div>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlTickerOn">
            <span>Ticker</span>
            <select id="ctlTickerOn" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
          <div class="pill mono" id="ctlTickerStatus" aria-live="polite">Ticker: ‚Äî</div>
        </div>

        <label class="row" for="ctlTickerLang">
          <span>Idioma</span>
          <select id="ctlTickerLang" class="select">
            <option value="auto">AUTO</option>
            <option value="es">ES</option>
            <option value="en">EN</option>
          </select>
        </label>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlTickerSpeed">
            <span>Velocidad (px/s)</span>
            <input id="ctlTickerSpeed" class="input" type="number" min="20" max="140" step="1" value="55" inputmode="numeric" />
          </label>
          <label class="row" style="margin:0" for="ctlTickerRefresh">
            <span>Refresh (min)</span>
            <input id="ctlTickerRefresh" class="input" type="number" min="3" max="60" step="1" value="12" inputmode="numeric" />
          </label>
        </div>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlTickerTop">
            <span>Offset top (px)</span>
            <input id="ctlTickerTop" class="input" type="number" min="0" max="120" step="1" value="10" inputmode="numeric" />
          </label>
          <label class="row" style="margin:0" for="ctlTickerHideOnVote">
            <span>Ocultar en voto</span>
            <select id="ctlTickerHideOnVote" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
        </div>

        <div class="row2">
          <button id="ctlTickerApply" class="btn full" type="button">Aplicar ticker</button>
          <button id="ctlTickerReset" class="btn ghost full" type="button">Reset ticker</button>
        </div>

        <div class="hint">
          ‚úÖ Se guarda en local y se env√≠a al player por <b>BroadcastChannel</b>.
        </div>
      </div>

      <!-- ‚úÖ COUNTDOWN (NEW) -->
      <div class="card">
        <div class="cardTitle">Cuenta atr√°s (overlay)</div>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlCountdownOn">
            <span>Cuenta atr√°s</span>
            <select id="ctlCountdownOn" class="select">
              <option value="off">OFF</option>
              <option value="on">ON</option>
            </select>
          </label>
          <div class="pill mono" id="ctlCountdownStatus" aria-live="polite">Cuenta atr√°s: ‚Äî</div>
        </div>

        <label class="row" for="ctlCountdownLabel">
          <span>Texto</span>
          <input id="ctlCountdownLabel" class="input" type="text" value="Fin de a√±o" autocomplete="off" />
        </label>

        <label class="row" for="ctlCountdownTarget">
          <span>Objetivo (hora local)</span>
          <input id="ctlCountdownTarget" class="input" type="datetime-local" />
        </label>

        <div class="row2">
          <button id="ctlCountdownApply" class="btn full" type="button">Aplicar cuenta atr√°s</button>
          <button id="ctlCountdownReset" class="btn ghost full" type="button">Reset cuenta atr√°s</button>
        </div>

        <div class="hint">
          ‚úÖ Se env√≠a al player por <b>BroadcastChannel</b> y tambi√©n va en la URL (<span class="mono">countdown*</span>).
        </div>
      </div>

      <!-- CAM SELECT -->
      <div class="card">
        <div class="cardTitle">Cambiar c√°mara</div>
        <input id="ctlSearch" class="input" type="text" placeholder="Buscar (t√≠tulo / lugar / fuente)‚Ä¶" autocomplete="off" />
        <select id="ctlSelect" class="select" size="10" aria-label="Lista de c√°maras"></select>
        <div class="row2">
          <button id="ctlGo" class="btn full" type="button">Ir</button>
          <button id="ctlBan" class="btn ghost full" type="button">Excluir esta (solo local)</button>
        </div>
        <div class="hint">Doble click en la lista = Ir.</div>
      </div>

      <!-- PREVIEW -->
      <div class="card">
        <div class="cardTitle">Preview (opcional)</div>
        <label class="row" for="ctlPreviewOn">
          <span>Mostrar</span>
          <select id="ctlPreviewOn" class="select">
            <option value="off">OFF</option>
            <option value="on">ON</option>
          </select>
        </label>
        <div id="ctlPreviewWrap" class="previewWrap hidden">
          <iframe
            id="ctlPreview"
            class="previewFrame"
            title="Preview stream"
            referrerpolicy="strict-origin-when-cross-origin"
            allow="autoplay; encrypted-media; picture-in-picture"
          ></iframe>
        </div>
        <div class="hint">Para OBS, normalmente OFF (ahorra recursos).</div>
      </div>

      <!-- BGM -->
      <div class="card">
        <div class="cardTitle">M√∫sica ambiente (BGM)</div>

        <label class="row" for="ctlBgmOn">
          <span>Enable</span>
          <select id="ctlBgmOn" class="select">
            <option value="off">OFF</option>
            <option value="on">ON</option>
          </select>
        </label>

        <label class="row" for="ctlBgmVol">
          <span>Volumen</span>
          <input id="ctlBgmVol" class="input" type="range" min="0" max="1" step="0.01" value="0.25" />
        </label>

        <label class="row" for="ctlBgmTrack">
          <span>Track</span>
          <select id="ctlBgmTrack" class="select" aria-label="Track BGM"></select>
        </label>

        <div class="controls3">
          <button class="btn" id="ctlBgmPrev" type="button" aria-label="Track anterior">‚èÆ</button>
          <button class="btn" id="ctlBgmPlay" type="button" aria-label="Play/Pausa BGM">‚ñ∂/‚è∏</button>
          <button class="btn" id="ctlBgmNext" type="button" aria-label="Siguiente track">‚è≠</button>
        </div>
        <button class="btn ghost full" id="ctlBgmShuffle" type="button">üîÄ Shuffle</button>

        <div class="hint" id="ctlBgmNow">‚Äî</div>
      </div>

      <!-- TWITCH VOTE + CHAT + ALERTS -->
      <div class="card">
        <div class="cardTitle">Twitch (votos / chat / alerts)</div>

        <label class="row" for="ctlTwitchChannel">
          <span>Canal</span>
          <input id="ctlTwitchChannel" class="input" type="text" placeholder="globaleyetv" autocomplete="off" />
        </label>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlVoteOn">
            <span>Votos</span>
            <select id="ctlVoteOn" class="select">
              <option value="off">OFF</option>
              <option value="on">ON</option>
            </select>
          </label>
          <label class="row" style="margin:0" for="ctlVoteOverlay">
            <span>Overlay voto</span>
            <select id="ctlVoteOverlay" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
        </div>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlChatOn">
            <span>Chat overlay</span>
            <select id="ctlChatOn" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
          <label class="row" style="margin:0" for="ctlChatHideCmd">
            <span>Ocultar cmds</span>
            <select id="ctlChatHideCmd" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
        </div>

        <label class="row" for="ctlAlertsOn">
          <span>Alerts Twitch</span>
          <select id="ctlAlertsOn" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <label class="row" for="ctlVoteWindow">
          <span>Duraci√≥n voto (s)</span>
          <input id="ctlVoteWindow" class="input" type="number" min="5" max="180" step="1" value="60" inputmode="numeric" />
        </label>

        <label class="row" for="ctlVoteAt">
          <span>Auto (a falta)</span>
          <input id="ctlVoteAt" class="input" type="number" min="5" max="600" step="1" value="60" inputmode="numeric" />
        </label>

        <label class="row" for="ctlVoteLead">
          <span>Pre-aviso (s)</span>
          <input id="ctlVoteLead" class="input" type="number" min="0" max="30" step="1" value="5" inputmode="numeric" />
        </label>

        <label class="row" for="ctlStayMins">
          <span>STAY ‚Üí re-voto (min)</span>
          <input id="ctlStayMins" class="input" type="number" min="1" max="120" step="1" value="5" inputmode="numeric" />
        </label>

        <label class="row" for="ctlYtCookies">
          <span>YouTube cookies</span>
          <select id="ctlYtCookies" class="select">
            <option value="on">ON (sesi√≥n)</option>
            <option value="off">OFF (nocookie)</option>
          </select>
        </label>

        <label class="row" for="ctlVoteCmd">
          <span>Cmds voto</span>
          <input id="ctlVoteCmd" class="input" type="text" value="!next,!cam|!stay,!keep" autocomplete="off" />
        </label>

        <div class="row2">
          <button id="ctlVoteStart" class="btn full" type="button">üó≥Ô∏è Lanzar voto</button>
          <button id="ctlVoteApply" class="btn ghost full" type="button">Aplicar</button>
        </div>

        <div class="hint">
          ‚úÖ Visible: <b>Pre-aviso + Duraci√≥n</b>. (Empate o 0 votos = NEXT)
        </div>
      </div>

      <!-- ‚úÖ NEW: TWITCH AUTO TITLE (HELIX) -->
      <div class="card">
        <div class="cardTitle">Twitch ‚Äî Auto t√≠tulo (Helix)</div>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlHelixOn">
            <span>Auto t√≠tulo</span>
            <select id="ctlHelixOn" class="select">
              <option value="off">OFF</option>
              <option value="on">ON</option>
            </select>
          </label>
          <div class="pill mono" id="ctlHelixStatus" aria-live="polite">Auto t√≠tulo: ‚Äî</div>
        </div>

        <label class="row" for="ctlHelixTpl">
          <span>Plantilla</span>
          <input id="ctlHelixTpl" class="input" type="text" value="üåç {place} ‚Äî {title}" autocomplete="off" />
        </label>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlHelixCooldown">
            <span>Cooldown (s)</span>
            <input id="ctlHelixCooldown" class="input" type="number" min="10" max="180" step="1" value="20" inputmode="numeric" />
          </label>
          <div class="hint" style="margin:0">
            Usa: <span class="mono">{place}</span> <span class="mono">{title}</span> <span class="mono">{source}</span> <span class="mono">{label}</span>
          </div>
        </div>

        <label class="row" for="ctlHelixClientId">
          <span>Client ID</span>
          <input id="ctlHelixClientId" class="input" type="text" placeholder="Twitch App Client ID" autocomplete="off" />
        </label>

        <label class="row" for="ctlHelixToken">
          <span>User Token (scope: channel:manage:broadcast)</span>
          <input id="ctlHelixToken" class="input" type="password" placeholder="Bearer token (sin 'Bearer ')" autocomplete="current-password" />
        </label>

        <div class="row2">
          <button id="ctlHelixApply" class="btn full" type="button">Aplicar</button>
          <button id="ctlHelixTest" class="btn ghost full" type="button">Probar ahora</button>
        </div>

        <div class="hint">
          ‚ö†Ô∏è El token debe ser del <b>mismo broadcaster</b>. Se guarda solo en tu navegador (localStorage). No va en la URL.
        </div>
      </div>

      <!-- ADS OVERLAY -->
      <div class="card">
        <div class="cardTitle">Anuncios (overlay en stream)</div>

        <label class="row" for="ctlAdsOn">
          <span>Ads overlay</span>
          <select id="ctlAdsOn" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlAdLead">
            <span>Lead (s)</span>
            <input id="ctlAdLead" class="input" type="number" min="0" max="300" step="1" value="30" inputmode="numeric" />
          </label>
          <label class="row" style="margin:0" for="ctlAdDur">
            <span>Duraci√≥n (s)</span>
            <input id="ctlAdDur" class="input" type="number" min="5" max="600" step="1" value="30" inputmode="numeric" />
          </label>
        </div>

        <label class="row" for="ctlAdShowDuring">
          <span>Mostrar durante</span>
          <select id="ctlAdShowDuring" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <label class="row" for="ctlAdChatText">
          <span>Msg chat (lead)</span>
          <input id="ctlAdChatText" class="input" type="text" value="‚ö†Ô∏è Anuncio en breve‚Ä¶ ¬°gracias por apoyar el canal! üíú" autocomplete="off" />
        </label>

        <div class="row2">
          <button id="ctlAdNoticeBtn" class="btn full" type="button">‚è≥ Aviso (AD_NOTICE)</button>
          <button id="ctlAdBeginBtn" class="btn full" type="button">‚ñ∂Ô∏è En curso (AD_BEGIN)</button>
        </div>
        <button id="ctlAdClearBtn" class="btn ghost full" type="button" style="margin-top:8px">‚úñÔ∏è Quitar (AD_CLEAR)</button>

        <div class="hint">
          Tip: cuando Twitch te avisa del ad, pulsa ‚ÄúAviso‚Äù. Si quieres, el bot tambi√©n escribe en chat.
        </div>
      </div>

      <!-- BOT IRC -->
      <div class="card">
        <div class="cardTitle">Bot (manda mensajes al chat)</div>

        <div class="row2">
          <label class="row" style="margin:0" for="ctlBotOn">
            <span>Bot</span>
            <select id="ctlBotOn" class="select">
              <option value="off">OFF</option>
              <option value="on">ON</option>
            </select>
          </label>
          <div class="pill mono" id="ctlBotStatus" aria-live="polite">Bot OFF</div>
        </div>

        <label class="row" for="ctlBotUser">
          <span>Usuario bot</span>
          <input id="ctlBotUser" class="input" type="text" placeholder="mi_bot" autocomplete="username" />
        </label>

        <label class="row" for="ctlBotToken">
          <span>OAuth token</span>
          <input id="ctlBotToken" class="input" type="password" placeholder="oauth:xxxx (o solo xxxx)" autocomplete="current-password" />
        </label>

        <label class="row" for="ctlBotSayOnAd">
          <span>Escribir en Ads</span>
          <select id="ctlBotSayOnAd" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <button id="ctlBotConnect" class="btn full" type="button">üîå Conectar bot</button>

        <div class="row2" style="margin-top:10px">
          <input id="ctlBotTestText" class="input" type="text" value="‚úÖ Bot online" autocomplete="off" />
          <button id="ctlBotTestSend" class="btn" type="button">Enviar test</button>
        </div>

        <div class="hint">
          ‚úÖ Esto solo funciona en tu panel (no en el player). No se expone el token en la URL.
        </div>
      </div>
    </section>

    <footer class="controlFooter" aria-label="Ayuda r√°pida">
      <span class="muted">Teclas: N siguiente ¬∑ P anterior ¬∑ Espacio pausa</span>
      <span class="dot">‚Ä¢</span>
      <span class="muted mono" id="ctlBusName">Canal: rlc_bus_v1</span>
    </footer>

    <noscript>
      <div class="card" style="margin-top:12px">
        <div class="cardTitle">JavaScript desactivado</div>
        <div class="hint">Este panel requiere JavaScript para funcionar.</div>
      </div>
    </noscript>
  </main>

  <script defer src="./cams.js"></script>
  <script defer src="./music.js"></script>
  <script defer src="./control.js"></script>

  <!-- Si los tienes en tu proyecto, se quedan tal cual -->
  <script defer src="./newsTickerControl.js"></script>
  <script defer src="./catalogControl.js"></script>
</body>
</html>
