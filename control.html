<!doctype html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <meta name="theme-color" content="#0b0f14" />
  <meta name="format-detection" content="telephone=no" />

  <title>Random Live Cams ‚Äî Control</title>

  <link rel="stylesheet" href="./styles.css" />
  <script>window.APP_VERSION = "2.1.4";</script>
</head>

<body class="mode-control">
  <main class="controlWrap">
    <header class="controlHeader">
      <div class="controlTitle">
        <div class="kicker">CONTROL ROOM</div>
        <div class="name">Random Live Cams</div>
      </div>
      <div class="pill mono" id="ctlStatus">Conectando‚Ä¶</div>
    </header>

    <section class="controlGrid">
      <!-- NOW -->
      <div class="card">
        <div class="cardTitle">Ahora</div>
        <div class="nowTitle" id="ctlNowTitle">‚Äî</div>
        <div class="nowMeta">
          <span id="ctlNowPlace">‚Äî</span>
          <span class="dot">‚Ä¢</span>
          <span class="mono" id="ctlNowTimer">--:--</span>
        </div>
        <div class="row2">
          <a id="ctlOrigin" class="btn ghost" href="#" target="_blank" rel="noopener">Abrir origen</a>
          <button id="ctlCopyStreamUrl" class="btn" type="button">Copiar URL stream</button>
        </div>
      </div>

      <!-- TRANSPORTE -->
      <div class="card">
        <div class="cardTitle">Transporte</div>
        <div class="controls3">
          <button class="btn" id="ctlPrev" type="button">‚óÄ</button>
          <button class="btn" id="ctlPlay" type="button">‚è∏</button>
          <button class="btn" id="ctlNext" type="button">‚ñ∂</button>
        </div>
        <button class="btn ghost full" id="ctlShuffle" type="button">üé≤ Mezclar</button>
      </div>

      <!-- AJUSTES -->
      <div class="card">
        <div class="cardTitle">Ajustes</div>

        <label class="row">
          <span>Duraci√≥n (min)</span>
          <input id="ctlMins" class="input" type="number" min="1" max="120" step="1" value="5" inputmode="numeric" />
        </label>
        <button id="ctlApplyMins" class="btn full" type="button">Aplicar duraci√≥n</button>

        <label class="row">
          <span>Fit</span>
          <select id="ctlFit" class="select">
            <option value="cover">Cover</option>
            <option value="contain">Contain</option>
          </select>
        </label>

        <label class="row">
          <span>HUD</span>
          <select id="ctlHud" class="select">
            <option value="on">Mostrar</option>
            <option value="off">Ocultar</option>
          </select>
        </label>

        <label class="row">
          <span>Detalles HUD</span>
          <select id="ctlHudDetails" class="select">
            <option value="collapsed">Colapsado</option>
            <option value="expanded">Expandido</option>
          </select>
        </label>

        <label class="row">
          <span>Autoskip (errores)</span>
          <select id="ctlAutoskip" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <label class="row">
          <span>Adfree</span>
          <select id="ctlAdfree" class="select">
            <option value="off">OFF</option>
            <option value="on">ON (sin YouTube)</option>
          </select>
        </label>

        <button id="ctlReset" class="btn ghost full" type="button">Reset estado</button>
      </div>

      <!-- ‚úÖ NEWS TICKER (CONFIG) -->
      <div class="card">
        <div class="cardTitle">Noticias (ticker)</div>

        <div class="row2">
          <label class="row" style="margin:0">
            <span>Ticker</span>
            <select id="ctlTickerOn" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
          <div class="pill mono" id="ctlTickerStatus">Ticker: ‚Äî</div>
        </div>

        <label class="row">
          <span>Idioma</span>
          <select id="ctlTickerLang" class="select">
            <option value="auto">AUTO</option>
            <option value="es">ES</option>
            <option value="en">EN</option>
          </select>
        </label>

        <div class="row2">
          <label class="row" style="margin:0">
            <span>Velocidad (px/s)</span>
            <input id="ctlTickerSpeed" class="input" type="number" min="20" max="140" step="1" value="55" inputmode="numeric" />
          </label>
          <label class="row" style="margin:0">
            <span>Refresh (min)</span>
            <input id="ctlTickerRefresh" class="input" type="number" min="3" max="60" step="1" value="12" inputmode="numeric" />
          </label>
        </div>

        <div class="row2">
          <label class="row" style="margin:0">
            <span>Offset top (px)</span>
            <input id="ctlTickerTop" class="input" type="number" min="0" max="120" step="1" value="10" inputmode="numeric" />
          </label>
          <label class="row" style="margin:0">
            <span>Ocultar en voto</span>
            <select id="ctlTickerHideOnVote" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
        </div>

        <div class="row2">
          <button id="ctlTickerApply" class="btn full" type="button">Aplicar ticker</button>
          <button id="ctlTickerReset" class="btn ghost full" type="button">Reset ticker</button>
        </div>

        <div class="hint">
          ‚úÖ Se guarda en local y se env√≠a al player por <b>BroadcastChannel</b>. Gratis (GDELT).
        </div>
      </div>

      <!-- CAM SELECT -->
      <div class="card">
        <div class="cardTitle">Cambiar c√°mara</div>
        <input id="ctlSearch" class="input" type="text" placeholder="Buscar (t√≠tulo / lugar / fuente)‚Ä¶" autocomplete="off" />
        <select id="ctlSelect" class="select" size="10" aria-label="Lista de c√°maras"></select>
        <div class="row2">
          <button id="ctlGo" class="btn full" type="button">Ir</button>
          <button id="ctlBan" class="btn ghost full" type="button">Excluir esta (solo local)</button>
        </div>
        <div class="hint">Doble click en la lista = Ir.</div>
      </div>

      <!-- PREVIEW -->
      <div class="card">
        <div class="cardTitle">Preview (opcional)</div>
        <label class="row">
          <span>Mostrar</span>
          <select id="ctlPreviewOn" class="select">
            <option value="off">OFF</option>
            <option value="on">ON</option>
          </select>
        </label>
        <div id="ctlPreviewWrap" class="previewWrap hidden">
          <iframe
            id="ctlPreview"
            class="previewFrame"
            title="Preview stream"
            referrerpolicy="strict-origin-when-cross-origin"
            allow="autoplay; encrypted-media; picture-in-picture"
          ></iframe>
        </div>
        <div class="hint">Para OBS, normalmente OFF (ahorra recursos).</div>
      </div>

      <!-- BGM -->
      <div class="card">
        <div class="cardTitle">M√∫sica ambiente (BGM)</div>

        <label class="row">
          <span>Enable</span>
          <select id="ctlBgmOn" class="select">
            <option value="off">OFF</option>
            <option value="on">ON</option>
          </select>
        </label>

        <label class="row">
          <span>Volumen</span>
          <input id="ctlBgmVol" class="input" type="range" min="0" max="1" step="0.01" value="0.25" />
        </label>

        <label class="row">
          <span>Track</span>
          <select id="ctlBgmTrack" class="select" aria-label="Track BGM"></select>
        </label>

        <div class="controls3">
          <button class="btn" id="ctlBgmPrev" type="button">‚èÆ</button>
          <button class="btn" id="ctlBgmPlay" type="button">‚ñ∂/‚è∏</button>
          <button class="btn" id="ctlBgmNext" type="button">‚è≠</button>
        </div>
        <button class="btn ghost full" id="ctlBgmShuffle" type="button">üîÄ Shuffle</button>

        <div class="hint" id="ctlBgmNow">‚Äî</div>
      </div>

      <!-- TWITCH VOTE + CHAT + ALERTS -->
      <div class="card">
        <div class="cardTitle">Twitch (votos / chat / alerts)</div>

        <label class="row">
          <span>Canal</span>
          <input id="ctlTwitchChannel" class="input" type="text" placeholder="globaleyetv" autocomplete="off" />
        </label>

        <div class="row2">
          <label class="row" style="margin:0">
            <span>Votos</span>
            <select id="ctlVoteOn" class="select">
              <option value="off">OFF</option>
              <option value="on">ON</option>
            </select>
          </label>
          <label class="row" style="margin:0">
            <span>Overlay voto</span>
            <select id="ctlVoteOverlay" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
        </div>

        <div class="row2">
          <label class="row" style="margin:0">
            <span>Chat overlay</span>
            <select id="ctlChatOn" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
          <label class="row" style="margin:0">
            <span>Ocultar cmds</span>
            <select id="ctlChatHideCmd" class="select">
              <option value="on">ON</option>
              <option value="off">OFF</option>
            </select>
          </label>
        </div>

        <label class="row">
          <span>Alerts Twitch</span>
          <select id="ctlAlertsOn" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <label class="row">
          <span>Duraci√≥n voto (s)</span>
          <input id="ctlVoteWindow" class="input" type="number" min="5" max="180" step="1" value="60" inputmode="numeric" />
        </label>

        <label class="row">
          <span>Auto (a falta)</span>
          <input id="ctlVoteAt" class="input" type="number" min="5" max="600" step="1" value="60" inputmode="numeric" />
        </label>

        <label class="row">
          <span>Pre-aviso (s)</span>
          <input id="ctlVoteLead" class="input" type="number" min="0" max="30" step="1" value="5" inputmode="numeric" />
        </label>

        <label class="row">
          <span>STAY ‚Üí re-voto (min)</span>
          <input id="ctlStayMins" class="input" type="number" min="1" max="120" step="1" value="5" inputmode="numeric" />
        </label>

        <label class="row">
          <span>YouTube cookies</span>
          <select id="ctlYtCookies" class="select">
            <option value="on">ON (sesi√≥n)</option>
            <option value="off">OFF (nocookie)</option>
          </select>
        </label>

        <label class="row">
          <span>Cmds voto</span>
          <input id="ctlVoteCmd" class="input" type="text" value="!next,!cam|!stay,!keep" autocomplete="off" />
        </label>

        <div class="row2">
          <button id="ctlVoteStart" class="btn full" type="button">üó≥Ô∏è Lanzar voto</button>
          <button id="ctlVoteApply" class="btn ghost full" type="button">Aplicar</button>
        </div>

        <div class="hint">
          ‚úÖ Visible: <b>Pre-aviso + Duraci√≥n</b>. (Empate o 0 votos = NEXT)
        </div>
      </div>

      <!-- ADS OVERLAY -->
      <div class="card">
        <div class="cardTitle">Anuncios (overlay en stream)</div>

        <label class="row">
          <span>Ads overlay</span>
          <select id="ctlAdsOn" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <div class="row2">
          <label class="row" style="margin:0">
            <span>Lead (s)</span>
            <input id="ctlAdLead" class="input" type="number" min="0" max="300" step="1" value="30" inputmode="numeric" />
          </label>
          <label class="row" style="margin:0">
            <span>Duraci√≥n (s)</span>
            <input id="ctlAdDur" class="input" type="number" min="5" max="600" step="1" value="30" inputmode="numeric" />
          </label>
        </div>

        <label class="row">
          <span>Mostrar durante</span>
          <select id="ctlAdShowDuring" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <label class="row">
          <span>Msg chat (lead)</span>
          <input id="ctlAdChatText" class="input" type="text" value="‚ö†Ô∏è Anuncio en breve‚Ä¶ ¬°gracias por apoyar el canal! üíú" autocomplete="off" />
        </label>

        <div class="row2">
          <button id="ctlAdNoticeBtn" class="btn full" type="button">‚è≥ Aviso (AD_NOTICE)</button>
          <button id="ctlAdBeginBtn" class="btn full" type="button">‚ñ∂Ô∏è En curso (AD_BEGIN)</button>
        </div>
        <button id="ctlAdClearBtn" class="btn ghost full" type="button" style="margin-top:8px">‚úñÔ∏è Quitar (AD_CLEAR)</button>

        <div class="hint">
          Tip: cuando Twitch te avisa del ad, pulsa ‚ÄúAviso‚Äù. Si quieres, el bot tambi√©n escribe en chat.
        </div>
      </div>

      <!-- BOT IRC -->
      <div class="card">
        <div class="cardTitle">Bot (manda mensajes al chat)</div>

        <div class="row2">
          <label class="row" style="margin:0">
            <span>Bot</span>
            <select id="ctlBotOn" class="select">
              <option value="off">OFF</option>
              <option value="on">ON</option>
            </select>
          </label>
          <div class="pill mono" id="ctlBotStatus">Bot OFF</div>
        </div>

        <label class="row">
          <span>Usuario bot</span>
          <input id="ctlBotUser" class="input" type="text" placeholder="mi_bot" autocomplete="username" />
        </label>

        <label class="row">
          <span>OAuth token</span>
          <input id="ctlBotToken" class="input" type="password" placeholder="oauth:xxxx (o solo xxxx)" autocomplete="current-password" />
        </label>

        <label class="row">
          <span>Escribir en Ads</span>
          <select id="ctlBotSayOnAd" class="select">
            <option value="on">ON</option>
            <option value="off">OFF</option>
          </select>
        </label>

        <button id="ctlBotConnect" class="btn full" type="button">üîå Conectar bot</button>

        <div class="row2" style="margin-top:10px">
          <input id="ctlBotTestText" class="input" type="text" value="‚úÖ Bot online" autocomplete="off" />
          <button id="ctlBotTestSend" class="btn" type="button">Enviar test</button>
        </div>

        <div class="hint">
          ‚úÖ Esto solo funciona en tu panel (no en el player). No se expone el token en la URL.
        </div>
      </div>
    </section>

    <footer class="controlFooter">
      <span class="muted">Teclas: N siguiente ¬∑ P anterior ¬∑ Espacio pausa</span>
      <span class="dot">‚Ä¢</span>
      <span class="muted mono">Canal: rlc_bus_v1</span>
    </footer>
  </main>

  <script defer src="./cams.js"></script>
  <script defer src="./music.js"></script>
  <script defer src="./control.js"></script>

  <!-- ‚úÖ NUEVO: panel/config del ticker -->
  <script defer src="./newsTickerControl.js"></script>
</body>
</html>
